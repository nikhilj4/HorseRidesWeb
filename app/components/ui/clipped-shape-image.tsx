
import React from 'react';

interface MediaItem {
    src: string;
    type: 'image' | 'video';
    alt: string;
    clipId: string;
}

interface ClippedShapeGalleryProps extends React.ComponentPropsWithoutRef<'section'> {
    mediaItems: MediaItem[];
}

const ClippedShapeGallery = React.forwardRef<HTMLElement, ClippedShapeGalleryProps>(
    ({ mediaItems, className, ...props }, ref) => {
        return (
            <>
                <svg className="absolute w-0 h-0 overflow-hidden" aria-hidden="true">
                    <defs>
                        <clipPath id="clip-another1" clipPathUnits="objectBoundingBox">
                            <path
                                d="M0 0.0417599C0 0.0186966 0.0250721 0 0.056 0H0.6105C0.641428 0 0.6665 0.0186965 0.6665 0.0417599V0.148024C0.6665 0.171087 0.691572 0.189784 0.7225 0.189784H0.944C0.974928 0.189784 1 0.20848 1 0.231544V0.95824C1 0.981303 0.974928 1 0.944 1H0.056C0.0250721 1 0 0.981303 0 0.95824V0.0417599Z"
                            />
                        </clipPath>
                        <clipPath id="clip-another2" clipPathUnits="objectBoundingBox">
                            <path
                                d="M0.1145 0.139138L0.235656 0.0147291C0.244771 0.0053695 0.257945 0 0.271794 0H0.5H0.96C0.982091 0 1 0.016076 1 0.0359066V0.964093C1 0.983924 0.982091 1 0.96 1H0.04C0.0179086 1 0 0.983924 0 0.964093V0.5V0.265845C0 0.255659 0.00428628 0.24585 0.0120005 0.238381L0.1145 0.139138Z"
                            />
                        </clipPath>
                        <clipPath id="clip-another3" clipPathUnits="objectBoundingBox">
                            <path
                                d="M0 0.0351351C0 0.0157306 0.0174609 0 0.039 0H0.5H0.727414C0.741798 0 0.755513 0.00547207 0.765179 0.0150678L0.858 0.107207L0.98622 0.236143C0.995093 0.245066 1 0.256625 1 0.268605V0.5V0.964865C1 0.984269 0.982539 1 0.961 1H0.039C0.0174609 1 0 0.984269 0 0.964865V0.0351351Z"
                            />
                        </clipPath>
                    </defs>
                </svg>

                <section
                    ref={ref}
                    className={`grid grid-cols-1 md:grid-cols-3 gap-8 ${className || ''}`}
                    {...props}
                >
                    {mediaItems.map((item, index) => (
                        <div key={index} className="relative group">
                            <figure
                                style={{ clipPath: `url(#${item.clipId})`, WebkitClipPath: `url(#${item.clipId})` }}
                                className="relative h-full w-full overflow-hidden bg-muted"
                            >
                                {item.type === 'image' ? (
                                    <img
                                        src={item.src}
                                        alt={item.alt}
                                        className="transition-all duration-500 aspect-[4/5] h-full w-full object-cover group-hover:scale-110"
                                    />
                                ) : (
                                    <video
                                        autoPlay
                                        muted
                                        loop
                                        playsInline
                                        className="transition-all duration-500 aspect-[4/5] h-full w-full object-cover group-hover:scale-110"
                                    >
                                        <source src={item.src} type="video/mp4" />
                                    </video>
                                )}
                                <div className="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end p-6">
                                    <p className="text-white font-heading text-xl font-bold">{item.alt}</p>
                                </div>
                            </figure>
                        </div>
                    ))}
                </section>
            </>
        );
    }
);

ClippedShapeGallery.displayName = 'ClippedShapeGallery';

export default ClippedShapeGallery;
